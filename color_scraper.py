import os
import cv2
from PIL import Image

# file_name = "28--kripna--Gran--Gepard_PS--Charlotta"
# video_path = os.path.abspath(f"{__file__}/../videos/{file_name}.mp4")
# fno = 6240
#
# cap = cv2.VideoCapture(video_path)
# cap.set(cv2.CAP_PROP_POS_FRAMES, fno)
# _, img = cap.read()

file_name = "11--jnh--Soriz--Prometheus--Avatar Belial"
file_path = os.path.abspath(f"{__file__}/../thumbnails_temp/{file_name}.png")
img = cv2.imread(file_path, cv2.IMREAD_UNCHANGED)

points = [
    [732, 377],
    [864, 629],
    [980, 480],
    [1184, 504],
    [1056, 494],
    [1121, 652],
    [1145, 770],
    [1006, 764],
]

# Image.fromarray(img).show()

# temp = img[120:180, 170:230]
# Image.fromarray(temp).show()


d = [[[732, 377], [187, 255, 253]], [[864, 629], [60, 159, 220]], [[980, 480], [20, 51, 80]], [[1184, 504], [143, 255, 252]], [[1056, 494], [114, 254, 254]], [[1121, 652], [11, 48, 75]], [[1145, 770], [25, 65, 101]], [[1006, 764], [13, 36, 58]]]
e = []

for [i, j] in d:
    asdf = img[i[1]][i[0]]
    for k in range(3):
        e.append(abs(j[k] - asdf[k]))

print(e)

# a = [[[732, 377], [189, 255, 253]], [[864, 629], [62, 159, 221]], [[980, 480], [20, 51, 80]], [[1184, 504], [145, 255, 252]], [[1056, 494], [113, 254, 254]], [[1121, 652], [12, 47, 76]], [[1145, 770], [24, 66, 98]], [[1006, 764], [14, 36, 60]]]
# b = [[[732, 377], [185, 255, 253]], [[864, 629], [59, 159, 218]], [[980, 480], [20, 51, 80]], [[1184, 504], [143, 255, 250]], [[1056, 494], [117, 255, 255]], [[1121, 652], [12, 49, 73]], [[1145, 770], [25, 65, 102]], [[1006, 764], [13, 36, 57]]]
# c = [[[732, 377], [189, 255, 254]], [[864, 629], [61, 159, 223]], [[980, 480], [21, 52, 81]], [[1184, 504], [143, 255, 255]], [[1056, 494], [112, 255, 254]], [[1121, 652], [10, 48, 76]], [[1145, 770], [26, 66, 103]], [[1006, 764], [13, 36, 57]]]
# d = []
#
# for i, j, k in zip(a, b, c):
#     d.append([i[0], [int((i[1][n] + j[1][n] + k[1][n]) / 3) for n in range(3)]])
#
# print(d)

# k = [[i, list(img[i[1]][i[0]])] for i in points]
# print(k)
