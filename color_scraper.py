import os
import cv2
from PIL import Image

file_name = "28--kripna--Gran--Gepard_PS--Charlotta"
video_path = os.path.abspath(f"{__file__}/../videos/{file_name}.mp4")
fno = 6240

points = [
    [234, 151],
    [302, 218],
    [379, 192],
    [414, 175],
    [1384, 166],
    [1409, 223],
    [1470, 224],
    [1588, 191],
    [1653, 191],
]

cap = cv2.VideoCapture(video_path)
cap.set(cv2.CAP_PROP_POS_FRAMES, fno)
_, img = cap.read()

# Image.fromarray(img).show()

# temp = img[120:180, 170:230]
# Image.fromarray(temp).show()


d = [[[234, 151], [84, 183, 247]], [[302, 218], [101, 191, 241]], [[379, 192], [146, 208, 255]], [[414, 175], [71, 175, 230]], [[1384, 166], [77, 64, 72]],
     [[1409, 223], [85, 73, 80]], [[1470, 224], [36, 26, 33]], [[1588, 191], [240, 222, 230]], [[1653, 191], [64, 55, 60]]]
e = []

for [i, j] in d:
    asdf = img[i[1]][i[0]]
    for k in range(3):
        e.append(abs(j[k] - asdf[k]))

print(e)

# a = [[[234, 151], [82, 182, 241]], [[302, 218], [106, 191, 241]], [[379, 192], [145, 207, 255]], [[414, 175], [77, 181, 235]], [[1384, 166], [75, 63, 70]], [[1409, 223], [84, 74, 81]], [[1470, 224], [35, 28, 34]], [[1588, 191], [239, 228, 232]], [[1653, 191], [63, 56, 62]]]
# b = [[[234, 151], [84, 184, 250]], [[302, 218], [102, 194, 243]], [[379, 192], [146, 208, 255]], [[414, 175], [68, 175, 233]], [[1384, 166], [82, 67, 76]], [[1409, 223], [85, 70, 79]], [[1470, 224], [38, 26, 33]], [[1588, 191], [241, 218, 229]], [[1653, 191], [69, 55, 62]]]
# c = [[[234, 151], [87, 184, 251]], [[302, 218], [96, 190, 241]], [[379, 192], [149, 211, 255]], [[414, 175], [70, 170, 222]], [[1384, 166], [76, 64, 71]], [[1409, 223], [87, 75, 82]], [[1470, 224], [36, 25, 34]], [[1588, 191], [241, 222, 230]], [[1653, 191], [61, 55, 58]]]
# d = []
#
# for i, j, k in zip(a, b, c):
#     d.append([i[0], [int((i[1][n] + j[1][n] + k[1][n]) / 3) for n in range(3)]])
#
# print(d)

# k = [[i, list(img[i[1]][i[0]])] for i in points]
# print(k)
